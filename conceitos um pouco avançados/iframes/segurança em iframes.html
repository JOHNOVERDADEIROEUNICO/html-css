<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iframe mais seguro</title>
</head>
<body>
    <h1>Aumentando a seguran√ßa de um iframe:</h1>
    <iframe src="iframe3 sites/site1.html" frameborder="1" sandbox="sandbox" referrerpolicy="no-referrer"></iframe>
    <!--O atributo sandbox da tag <iframe> serve para restringir o que o conte√∫do carregado dentro do iframe pode fazer, aumentando a seguran√ßa da p√°gina.

    Ele cria um ambiente isolado (sandbox = ‚Äúcaixa de areia‚Äù), onde o conte√∫do embutido perde v√°rias permiss√µes por padr√£o.
    
    Quando usado sem nenhum valor, o conte√∫do dentro do iframe fica altamente restrito.
    
    O que o sandbox bloqueia por padr√£o?
    Sem permiss√µes adicionais, o iframe N√ÉO pode:

        1.Executar JavaScript;

        2.Enviar formul√°rios;

        3.Abrir pop-ups;

        4.Acessar cookies, localStorage ou sessionStorage;

        5.Navegar a p√°gina principal (window.top);

        6.Ser considerado da mesma origem (same-origin);

        üëâ Na pr√°tica, o conte√∫do fica quase ‚Äúsomente leitura‚Äù.
        
    Liberando permiss√µes espec√≠ficas

    Voc√™ pode liberar funcionalidades uma a uma, passando valores ao sandbox.
    
    Permiss√µes mais comuns:
    Permiss√£o   /	O que libera;
    allow-scripts  /	Executar JavaScript;
    allow-forms  /	Enviar formul√°rios;
    allow-popups /	Abrir janelas (window.open);
    allow-same-origin /	Considerar o iframe como mesma origem;
    allow-top-navigation /	Navegar a p√°gina principal;
    allow-downloads /	Permitir downloads;
    allow-modals /	Abrir alert, confirm, prompt;
    
    Por que o sandbox √© importante?

    Ele √© muito usado quando voc√™:

        1.Carrega conte√∫do de terceiros;

        2.Exibe an√∫ncios;

        3.Incorpora sites externos;

        4.Quer evitar ataques XSS, roubo de dados ou redirecionamentos maliciosos;

    Rela√ß√£o com erros de iframe que voc√™ j√° viu

    Lembra quando um site ‚Äúse recusa a conectar‚Äù no iframe?
    Isso pode acontecer porque:

    O site usa X-Frame-Options

    Ou porque o sandbox est√° bloqueando alguma funcionalidade necess√°ria-->

    <!--O referrerpolicy serve para bloquear coleta de dados do site que est√° dentro do iframe, assim aumentando a prote√ß√£o.-->

    <!--Para impedir com que outros sites utilizem o seu como um iframe, voc√™ deve fazer configura√ß√µes nos cabe√ßalhos http de seguran√ßa do servidor usando os comandos:
        1.x-Frame-Options: DENY/SAMEORIGIN (DENY bloqueia e o SAMEORIGIN permite somente sites de mesmo dom√≠nio.);
        
        2.Content-Security-Policy (Recomendado):  frame-ancestrs 'none'/ frame-ancestors 'self' / frame-ancestors 'self' https://meusite.com.br (1.Todo iframe, 2.Apenas o pr√≥prio site, 3.Permite sites especificos.)
        
    Essas configura√ß√µes podem ser feitas em Apache (.htaccess), ASP.NET / C#, Nginx.
    -->
        </body>
</html>